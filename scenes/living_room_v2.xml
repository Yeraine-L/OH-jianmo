<mujoco model="living_room_v2">
  <!-- 编译器选项 -->
  <compiler angle="degree" coordinate="local" inertiafromgeom="true" meshdir="../assets/meshes"/>

  <!-- 默认设置 -->
  <option timestep="0.002" gravity="0 0 -9.81">
    <!-- 优化求解器参数 -->
    <flag warmstart="enable"/>
  </option>

  <!-- 默认类定义 -->
  <default>
    <geom solref="0.01 1" solimp="0.95 0.95 0.001"/>
  </default>

  <!-- 资源定义 -->
  <asset>
    <!-- 地板棋盘格纹理 -->
    <texture name="floor_texture" type="2d" builtin="checker"
             rgb1="0.85 0.85 0.85" rgb2="0.65 0.65 0.65"
             width="512" height="512" mark="edge" markrgb="0.25 0.25 0.25"/>

    <!-- 墙壁纹理（带微妙花纹）-->
    <texture name="wall_texture" type="2d" builtin="flat"
             rgb1="0.96 0.94 0.88" width="512" height="512"/>

    <!-- 木纹纹理（桌子）-->
    <texture name="wood_texture" type="2d" builtin="gradient"
             rgb1="0.65 0.45 0.25" rgb2="0.45 0.30 0.18"
             width="512" height="512" mark="cross" markrgb="0.35 0.22 0.12"/>

    <!-- 布料纹理（沙发）-->
    <texture name="fabric_texture" type="2d" builtin="flat"
             rgb1="0.35 0.45 0.55" width="512" height="512"/>

    <!-- 陶瓷纹理（茶壶）-->
    <texture name="ceramic_texture" type="2d" builtin="gradient"
             rgb1="0.9 0.9 0.95" rgb2="0.8 0.8 0.88"
             width="256" height="256"/>

    <!-- 地毯纹理 -->
    <texture name="carpet_texture" type="2d" builtin="checker"
             rgb1="0.75 0.35 0.35" rgb2="0.65 0.25 0.25"
             width="256" height="256" mark="none"/>

    <!-- 材质定义 -->
    <material name="floor_mat" texture="floor_texture"
              specular="0.4" shininess="0.15" reflectance="0.12"/>

    <material name="wall_mat" texture="wall_texture"
              specular="0.15" shininess="0.08" reflectance="0.02"/>

    <material name="wood_mat" texture="wood_texture"
              specular="0.5" shininess="0.35" reflectance="0.08"/>

    <material name="fabric_mat" texture="fabric_texture"
              specular="0.1" shininess="0.02" reflectance="0.01"/>

    <material name="ceramic_mat" texture="ceramic_texture"
              specular="0.8" shininess="0.6" reflectance="0.15"/>

    <material name="carpet_mat" texture="carpet_texture"
              specular="0.05" shininess="0.01" reflectance="0"/>

    <!-- 茶壶网格 -->
    <mesh name="teapot_mesh" file="teapot_simple.obj" scale="1.0 1.0 1.0"/>
  </asset>

  <!-- 视觉效果设置 -->
  <visual>
    <global offwidth="1920" offheight="1080" elevation="-20" azimuth="135" fovy="50"/>
    <quality shadowsize="4096" offsamples="4"/>
    <map force="0.1" zfar="50" znear="0.01"/>
    <headlight ambient="0.4 0.4 0.4" diffuse="0.8 0.8 0.8" specular="0.4 0.4 0.4"/>
  </visual>

  <!-- 世界坐标系 -->
  <worldbody>
    <!-- 环境光照 - 优化光照系统 -->
    <!-- 主光源（天花板中央） -->
    <light name="ceiling_main" pos="0 0 2.8" dir="0 0 -1"
           directional="false" diffuse="0.9 0.9 0.85" specular="0.6 0.6 0.6"
           castshadow="true"/>

    <!-- 补光1（左前方） -->
    <light name="fill_light_1" pos="2 -2 2.5" dir="-0.4 0.4 -1"
           directional="false" diffuse="0.5 0.5 0.5" specular="0.3 0.3 0.3"
           castshadow="false"/>

    <!-- 补光2（右后方） -->
    <light name="fill_light_2" pos="-2 2 2.2" dir="0.5 -0.5 -1"
           directional="false" diffuse="0.4 0.4 0.45" specular="0.2 0.2 0.25"
           castshadow="false"/>

    <!-- 地板 (6m x 6m) - 优化摩擦参数 -->
    <geom name="floor" type="plane" size="3 3 0.1"
          material="floor_mat" condim="3" friction="1.0 0.5 0.01"
          solref="0.02 1" solimp="0.9 0.95 0.001"/>

    <!-- 墙壁 -->
    <geom name="wall_back" type="box" pos="0 3 1.25" size="3 0.1 1.25"
          material="wall_mat" contype="0" conaffinity="0"/>

    <geom name="wall_front" type="box" pos="0 -3 1.25" size="3 0.1 1.25"
          material="wall_mat" contype="0" conaffinity="0"/>

    <geom name="wall_left" type="box" pos="-3 0 1.25" size="0.1 3 1.25"
          material="wall_mat" contype="0" conaffinity="0"/>

    <geom name="wall_right" type="box" pos="3 0 1.25" size="0.1 3 1.25"
          material="wall_mat" contype="0" conaffinity="0"/>

    <!-- 客厅茶几 (房间中央) -->
    <body name="coffee_table" pos="0 0 0.35">
      <!-- 桌面 -->
      <geom name="table_top" type="box" size="0.6 0.4 0.025"
            material="wood_mat" mass="12" friction="0.8 0.4 0.01"/>

      <!-- 桌腿 (四个) - 优化碰撞参数 -->
      <geom name="leg_1" type="cylinder" pos="0.5 0.3 -0.325"
            size="0.03 0.325" rgba="0.35 0.25 0.15 1" mass="1.2"
            friction="1.0 0.5 0.01"/>
      <geom name="leg_2" type="cylinder" pos="0.5 -0.3 -0.325"
            size="0.03 0.325" rgba="0.35 0.25 0.15 1" mass="1.2"
            friction="1.0 0.5 0.01"/>
      <geom name="leg_3" type="cylinder" pos="-0.5 0.3 -0.325"
            size="0.03 0.325" rgba="0.35 0.25 0.15 1" mass="1.2"
            friction="1.0 0.5 0.01"/>
      <geom name="leg_4" type="cylinder" pos="-0.5 -0.3 -0.325"
            size="0.03 0.325" rgba="0.35 0.25 0.15 1" mass="1.2"
            friction="1.0 0.5 0.01"/>

      <!-- 茶壶（放在桌面上）-->
      <body name="teapot" pos="0.15 0 0.07">
        <freejoint/>
        <geom name="teapot_geom" type="mesh" mesh="teapot_mesh"
              material="ceramic_mat" mass="0.5"
              friction="0.6 0.3 0.005" solref="0.01 1"/>
      </body>
    </body>

    <!-- 长沙发 (靠后墙) - 多组件设计 -->
    <body name="long_sofa" pos="0 2.4 0.25">
      <!-- 座椅底座 -->
      <geom name="sofa_base" type="box" size="1.2 0.45 0.08"
            rgba="0.25 0.25 0.30 1" mass="20"
            friction="1.2 0.6 0.01" solref="0.02 1"/>

      <!-- 座椅垫（柔软材质）-->
      <geom name="sofa_seat_cushion" type="box" pos="0 0 0.16" size="1.15 0.42 0.08"
            material="fabric_mat" mass="8"
            friction="1.5 0.8 0.02" solref="0.005 0.8" solimp="0.9 0.95 0.001"/>

      <!-- 靠背 -->
      <geom name="sofa_backrest" type="box" pos="0 0.38 0.45" size="1.15 0.1 0.37"
            material="fabric_mat" mass="12"
            friction="1.2 0.6 0.01" solref="0.01 1"/>

      <!-- 左扶手 -->
      <geom name="sofa_armrest_left" type="box" pos="-1.1 0 0.30" size="0.1 0.45 0.22"
            material="fabric_mat" mass="4"
            friction="1.2 0.6 0.01"/>

      <!-- 右扶手 -->
      <geom name="sofa_armrest_right" type="box" pos="1.1 0 0.30" size="0.1 0.45 0.22"
            material="fabric_mat" mass="4"
            friction="1.2 0.6 0.01"/>

      <!-- 装饰枕头1 -->
      <body name="cushion_1" pos="-0.5 -0.15 0.30">
        <freejoint/>
        <geom name="cushion_1_geom" type="box" size="0.15 0.15 0.08"
              rgba="0.85 0.75 0.45 1" mass="0.3"
              friction="1.0 0.5 0.01" solref="0.003 0.5"/>
      </body>

      <!-- 装饰枕头2 -->
      <body name="cushion_2" pos="0.5 -0.15 0.30">
        <freejoint/>
        <geom name="cushion_2_geom" type="box" size="0.15 0.15 0.08"
              rgba="0.75 0.45 0.50 1" mass="0.3"
              friction="1.0 0.5 0.01" solref="0.003 0.5"/>
      </body>
    </body>

    <!-- 地毯 (在茶几下方) - 优化纹理和物理 -->
    <geom name="carpet" type="box" pos="0 0 0.008" size="1.8 1.4 0.008"
          material="carpet_mat" friction="1.8 0.9 0.02"
          solref="0.005 0.5" solimp="0.95 0.98 0.001"/>

    <!-- 边几（沙发旁） -->
    <body name="side_table" pos="1.5 2.2 0.3">
      <geom name="side_table_top" type="cylinder" size="0.2 0.02"
            material="wood_mat" mass="3" friction="0.8 0.4 0.01"/>
      <geom name="side_table_leg" type="cylinder" pos="0 0 -0.28" size="0.025 0.28"
            rgba="0.35 0.25 0.15 1" mass="1" friction="1.0 0.5 0.01"/>

      <!-- 台灯（装饰）-->
      <body name="lamp" pos="0 0 0.05">
        <geom name="lamp_base" type="cylinder" size="0.06 0.015"
              rgba="0.2 0.2 0.2 1" mass="0.5"/>
        <geom name="lamp_pole" type="cylinder" pos="0 0 0.15" size="0.01 0.15"
              rgba="0.3 0.3 0.3 1" mass="0.2"/>
        <geom name="lamp_shade" type="cylinder" pos="0 0 0.35" size="0.08 0.05"
              rgba="0.95 0.9 0.85 0.8" mass="0.1" contype="0" conaffinity="0"/>
      </body>
    </body>

    <!-- 书架（靠墙）-->
    <body name="bookshelf" pos="-2.5 -2 0.6">
      <!-- 背板 -->
      <geom name="shelf_back" type="box" size="0.3 0.02 0.6"
            material="wood_mat" mass="8"/>
      <!-- 层板1 -->
      <geom name="shelf_1" type="box" pos="0 0.15 -0.4" size="0.28 0.15 0.02"
            material="wood_mat" mass="3"/>
      <!-- 层板2 -->
      <geom name="shelf_2" type="box" pos="0 0.15 -0.1" size="0.28 0.15 0.02"
            material="wood_mat" mass="3"/>
      <!-- 层板3 -->
      <geom name="shelf_3" type="box" pos="0 0.15 0.2" size="0.28 0.15 0.02"
            material="wood_mat" mass="3"/>

      <!-- 装饰书本 -->
      <geom name="book_1" type="box" pos="0 0.25 -0.28" size="0.04 0.08 0.12"
            rgba="0.6 0.2 0.2 1" mass="0.2"/>
      <geom name="book_2" type="box" pos="0.1 0.25 -0.28" size="0.04 0.08 0.12"
            rgba="0.2 0.4 0.6 1" mass="0.2"/>
    </body>

    <!-- 机器人放置区域标记 -->
    <body name="robot_spawn_point" pos="-1.5 -1.5 0.01">
      <geom name="spawn_platform" type="cylinder" size="0.35 0.01"
            rgba="0.3 0.8 0.3 0.4" contype="0" conaffinity="0"/>
      <site name="robot_spawn_site" pos="0 0 0.02" size="0.02" rgba="0 1 0 0.6"/>
    </body>

    <!-- 相机目标点（用于优化视角）-->
    <camera name="main_view" pos="3.5 -3.5 2.8" xyaxes="0.707 0.707 0 -0.408 0.408 0.816" fovy="50"/>
    <camera name="top_view" pos="0 0 5" xyaxes="1 0 0 0 1 0" fovy="60"/>
    <camera name="sofa_view" pos="2 -1 1.5" xyaxes="0.8 0.6 0 -0.36 0.48 0.8" fovy="55"/>
  </worldbody>

  <!-- 执行器配置（预留给机器人模型） -->
  <actuator>
    <!-- 机器人执行器将在此处定义 -->
  </actuator>
</mujoco>
